<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Jithub: include/mpx/serial.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Jithub
   &#160;<span id="projectnumber">R6</span>
   </div>
   <div id="projectbrief">ProgrammersGuideforModuleR6forCS450.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_0259555adfc593a79b5d2afb061087a6.html">mpx</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">serial.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Kernel functions and constants for handling serial I/O.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stddef.h&gt;</code><br />
<code>#include &lt;mpx/device.h&gt;</code><br />
<code>#include &lt;<a class="el" href="dataStructs_8h_source.html">dataStructs.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for serial.h:</div>
<div class="dyncontent">
<div class="center"><img src="serial_8h__incl.png" border="0" usemap="#include_2mpx_2serial_8h" alt=""/></div>
<!-- MAP 0 -->
</div>
</div>
<p><a href="serial_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a59d1db7894c07b31b520be0ae0a32896"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial_8h.html#a59d1db7894c07b31b520be0ae0a32896">serial_init</a> (device dev)</td></tr>
<tr class="separator:a59d1db7894c07b31b520be0ae0a32896"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e049d65b09969503d73dd367775d0f6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial_8h.html#a7e049d65b09969503d73dd367775d0f6">serial_out</a> (device dev, const char *buffer, size_t len)</td></tr>
<tr class="separator:a7e049d65b09969503d73dd367775d0f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e9204d031fa281b2983b1e97859c179"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial_8h.html#a1e9204d031fa281b2983b1e97859c179">serial_poll</a> (device dev, char *buffer, size_t len)</td></tr>
<tr class="memdesc:a1e9204d031fa281b2983b1e97859c179"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a string from a serial port.  <a href="serial_8h.html#a1e9204d031fa281b2983b1e97859c179">More...</a><br /></td></tr>
<tr class="separator:a1e9204d031fa281b2983b1e97859c179"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af543ea6e878d9edde4567b8b375abd83"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial_8h.html#af543ea6e878d9edde4567b8b375abd83">backspace</a> (int *pos, int *end, char *buffer, device dev)</td></tr>
<tr class="memdesc:af543ea6e878d9edde4567b8b375abd83"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper method for serial_poll that does the work of a backspace.  <a href="serial_8h.html#af543ea6e878d9edde4567b8b375abd83">More...</a><br /></td></tr>
<tr class="separator:af543ea6e878d9edde4567b8b375abd83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5f471c05abad816427f87321fb6c9a1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial_8h.html#aa5f471c05abad816427f87321fb6c9a1">serial_open</a> (device dev, int speed)</td></tr>
<tr class="memdesc:aa5f471c05abad816427f87321fb6c9a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes serial port to allow I/O.  <a href="serial_8h.html#aa5f471c05abad816427f87321fb6c9a1">More...</a><br /></td></tr>
<tr class="separator:aa5f471c05abad816427f87321fb6c9a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f14935a08ae18c6acf905ed5afa717e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial_8h.html#a4f14935a08ae18c6acf905ed5afa717e">serial_close</a> (device dev)</td></tr>
<tr class="memdesc:a4f14935a08ae18c6acf905ed5afa717e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes associated serial port.  <a href="serial_8h.html#a4f14935a08ae18c6acf905ed5afa717e">More...</a><br /></td></tr>
<tr class="separator:a4f14935a08ae18c6acf905ed5afa717e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af90af90f95b458ea262b31bc33c12bbd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial_8h.html#af90af90f95b458ea262b31bc33c12bbd">serial_read</a> (device dev, char *buf, size_t len)</td></tr>
<tr class="memdesc:af90af90f95b458ea262b31bc33c12bbd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the read process.  <a href="serial_8h.html#af90af90f95b458ea262b31bc33c12bbd">More...</a><br /></td></tr>
<tr class="separator:af90af90f95b458ea262b31bc33c12bbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abeb5f15d77be064b4b5103af02aa4c21"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial_8h.html#abeb5f15d77be064b4b5103af02aa4c21">serial_write</a> (device dev, char *buf, size_t len)</td></tr>
<tr class="memdesc:abeb5f15d77be064b4b5103af02aa4c21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the write process.  <a href="serial_8h.html#abeb5f15d77be064b4b5103af02aa4c21">More...</a><br /></td></tr>
<tr class="separator:abeb5f15d77be064b4b5103af02aa4c21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf25dba858661de8b55c6a40224627a1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial_8h.html#abf25dba858661de8b55c6a40224627a1">serial_interrupt</a> (void)</td></tr>
<tr class="memdesc:abf25dba858661de8b55c6a40224627a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">First-level interrupt handler to determine which second-level interrupt handler to deploy.  <a href="serial_8h.html#abf25dba858661de8b55c6a40224627a1">More...</a><br /></td></tr>
<tr class="separator:abf25dba858661de8b55c6a40224627a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2902c2c0a8a9bd4bc1d0dc88257f1657"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial_8h.html#a2902c2c0a8a9bd4bc1d0dc88257f1657">serial_input_interrupt</a> (struct <a class="el" href="structdcb.html">dcb</a> *<a class="el" href="structdcb.html">dcb</a>)</td></tr>
<tr class="memdesc:a2902c2c0a8a9bd4bc1d0dc88257f1657"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interrupt to handle input from device.  <a href="serial_8h.html#a2902c2c0a8a9bd4bc1d0dc88257f1657">More...</a><br /></td></tr>
<tr class="separator:a2902c2c0a8a9bd4bc1d0dc88257f1657"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd1c98e4945071f79a2ea126363030ba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial_8h.html#abd1c98e4945071f79a2ea126363030ba">serial_output_interrupt</a> (struct <a class="el" href="structdcb.html">dcb</a> *<a class="el" href="structdcb.html">dcb</a>)</td></tr>
<tr class="memdesc:abd1c98e4945071f79a2ea126363030ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interrupt to handle output from device.  <a href="serial_8h.html#abd1c98e4945071f79a2ea126363030ba">More...</a><br /></td></tr>
<tr class="separator:abd1c98e4945071f79a2ea126363030ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Kernel functions and constants for handling serial I/O. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="af543ea6e878d9edde4567b8b375abd83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af543ea6e878d9edde4567b8b375abd83">&#9670;&nbsp;</a></span>backspace()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void backspace </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">device&#160;</td>
          <td class="paramname"><em>dev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper method for serial_poll that does the work of a backspace. </p>
<dl class="section author"><dt>Author</dt><dd>Noah Marner </dd>
<dd>
Blake Wagner</dd></dl>
<p>This function is used when a backspace or delete character is input. If there is a backspace, the function is simply called. When a delete character is input, the position is set forward one and then the function is called. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pos</td><td>The current position in the buffer </td></tr>
    <tr><td class="paramname">end</td><td>The farthest position that has been reached in the buffer </td></tr>
    <tr><td class="paramname">buffer</td><td>A buffer that stores the current string </td></tr>
    <tr><td class="paramname">dev</td><td>The serial port to read data from </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4f14935a08ae18c6acf905ed5afa717e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f14935a08ae18c6acf905ed5afa717e">&#9670;&nbsp;</a></span>serial_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int serial_close </td>
          <td>(</td>
          <td class="paramtype">device&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes associated serial port. </p>
<dl class="section author"><dt>Author</dt><dd>Noah Marner </dd>
<dd>
Blake Wagner </dd>
<dd>
Sam Desai </dd>
<dd>
Jackson Monk</dd></dl>
<p>Disables the COM1 level in the PIC register and disables interrupts by loading 0s into the MSR and IER. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Device to close </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Int to test success </dd></dl>

</div>
</div>
<a id="a59d1db7894c07b31b520be0ae0a32896"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59d1db7894c07b31b520be0ae0a32896">&#9670;&nbsp;</a></span>serial_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int serial_init </td>
          <td>(</td>
          <td class="paramtype">device&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes devices for user input and output </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">device</td><td>A serial port to initialize (COM1, COM2, COM3, or COM4) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, non-zero on failure </dd></dl>

</div>
</div>
<a id="a2902c2c0a8a9bd4bc1d0dc88257f1657"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2902c2c0a8a9bd4bc1d0dc88257f1657">&#9670;&nbsp;</a></span>serial_input_interrupt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void serial_input_interrupt </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdcb.html">dcb</a> *&#160;</td>
          <td class="paramname"><em>dcb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Interrupt to handle input from device. </p>
<dl class="section author"><dt>Author</dt><dd>Noah Marner </dd>
<dd>
Blake Wagner </dd>
<dd>
Sam Desai </dd>
<dd>
Jackson Monk</dd></dl>
<p>Gets a character from COM1 using INB. If the DCB operation is not read (device is writing), add characters to the DCB ring buffer and return. If the character is a return carriage, outputs a new line and sets the appropriate character in the DCB buffer to a null terminator. If the character is not a backspace or carriage return, sets the buffer to the character and outputs the character. If the count has not been exceeded and we are not writing a new line or return carriage, if the character is a backspace, backspace and remove the last character from the buffer. Set the DCB OP to IDLE and the eFlag to COMPLETE. </p>

</div>
</div>
<a id="abf25dba858661de8b55c6a40224627a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf25dba858661de8b55c6a40224627a1">&#9670;&nbsp;</a></span>serial_interrupt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void serial_interrupt </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>First-level interrupt handler to determine which second-level interrupt handler to deploy. </p>
<dl class="section author"><dt>Author</dt><dd>Noah Marner </dd>
<dd>
Blake Wagner </dd>
<dd>
Sam Desai </dd>
<dd>
Jackson Monk</dd></dl>
<p>First-level interrupt handler to determine which second-level interrupt handler to deploy. Checks if the status is closed. If so, returns. Otherwise, uses the IIR to determine whether the interrupt is an input or output interrupt. Calls the correct handler. </p>

</div>
</div>
<a id="aa5f471c05abad816427f87321fb6c9a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5f471c05abad816427f87321fb6c9a1">&#9670;&nbsp;</a></span>serial_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int serial_open </td>
          <td>(</td>
          <td class="paramtype">device&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>speed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes serial port to allow I/O. </p>
<dl class="section author"><dt>Author</dt><dd>Noah Marner </dd>
<dd>
Blake Wagner </dd>
<dd>
Sam Desai </dd>
<dd>
Jackson Monk</dd></dl>
<p>Initializes the DCB by setting all the struct members and installs the custom interrupt handler to the interrupt vector table. Computes baud rate divisor and stores in LCR. Enables interrupts in the PIC mask register, enables serial port interrupts, enables input interrupts. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Device to open </td></tr>
    <tr><td class="paramname">speed</td><td>Used to calculate baud rate of device </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int to signal success </dd></dl>

</div>
</div>
<a id="a7e049d65b09969503d73dd367775d0f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e049d65b09969503d73dd367775d0f6">&#9670;&nbsp;</a></span>serial_out()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int serial_out </td>
          <td>(</td>
          <td class="paramtype">device&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Writes a buffer to a serial port </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">device</td><td>The serial port to output to </td></tr>
    <tr><td class="paramname">buffer</td><td>A pointer to an array of characters to output </td></tr>
    <tr><td class="paramname">len</td><td>The number of bytes to write </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes written </dd></dl>

</div>
</div>
<a id="abd1c98e4945071f79a2ea126363030ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd1c98e4945071f79a2ea126363030ba">&#9670;&nbsp;</a></span>serial_output_interrupt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void serial_output_interrupt </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdcb.html">dcb</a> *&#160;</td>
          <td class="paramname"><em>dcb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Interrupt to handle output from device. </p>
<dl class="section author"><dt>Author</dt><dd>Noah Marner </dd>
<dd>
Blake Wagner </dd>
<dd>
Sam Desai </dd>
<dd>
Jackson Monk</dd></dl>
<p>Creates an IOCB pointer to look at the DCB's IOCBQ's head. If the OP is not WRITE, return. If there is something to write, increment buffer since the first character was printed by serial_write. OUTB the current character, decrement the buffer size variable, and return. Otherwise, there is nothing left to write. Set the DCB OP to IDLE, the eFlag to COMPLETE, and disable output interrupts. </p>

</div>
</div>
<a id="a1e9204d031fa281b2983b1e97859c179"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e9204d031fa281b2983b1e97859c179">&#9670;&nbsp;</a></span>serial_poll()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int serial_poll </td>
          <td>(</td>
          <td class="paramtype">device&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads a string from a serial port. </p>
<dl class="section author"><dt>Author</dt><dd>Noah Marner </dd>
<dd>
Blake Wagner</dd></dl>
<p>This function is used to read in data from the console. It reads characters until either the length limit is reached or an enter key is read in. Special characters such as backspace, delete and arrow keys are also handled in this function. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">device</td><td>The serial port to read data from </td></tr>
    <tr><td class="paramname">buffer</td><td>A buffer to write data into as it is read from the serial port </td></tr>
    <tr><td class="paramname">count</td><td>The maximum number of bytes to read </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes read on success, a negative number on failure </dd></dl>

</div>
</div>
<a id="af90af90f95b458ea262b31bc33c12bbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af90af90f95b458ea262b31bc33c12bbd">&#9670;&nbsp;</a></span>serial_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int serial_read </td>
          <td>(</td>
          <td class="paramtype">device&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts the read process. </p>
<dl class="section author"><dt>Author</dt><dd>Noah Marner </dd>
<dd>
Blake Wagner </dd>
<dd>
Sam Desai </dd>
<dd>
Jackson Monk</dd></dl>
<p>Initializes DCB count, sets op code to READ and eFlag to INCOMPLETE to signal incomplete IO. Copies contents of ring buffer to requesters buffer, if the character is a new line or a return carriage, or if the ring buffer is filled, returns. Enables global interrupts with sti. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Device to read from </td></tr>
    <tr><td class="paramname">buf</td><td>The buffer to fill </td></tr>
    <tr><td class="paramname">len</td><td>The number of characters to read </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Int to test success </dd></dl>

</div>
</div>
<a id="abeb5f15d77be064b4b5103af02aa4c21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abeb5f15d77be064b4b5103af02aa4c21">&#9670;&nbsp;</a></span>serial_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int serial_write </td>
          <td>(</td>
          <td class="paramtype">device&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts the write process. </p>
<dl class="section author"><dt>Author</dt><dd>Noah Marner </dd>
<dd>
Blake Wagner </dd>
<dd>
Sam Desai </dd>
<dd>
Jackson Monk</dd></dl>
<p>Verifies parameters, sets DCB op code to WRITE, buffer to the requesters buffer, count to input length and eFlag to INCOMPLETE to indiciate IO incomplete. Writes the first character, enables interrupts to handle the rest of the output. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Device to write to </td></tr>
    <tr><td class="paramname">buf</td><td>Buffer to write from </td></tr>
    <tr><td class="paramname">len</td><td>Amount of characters to write </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Int to test success </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
